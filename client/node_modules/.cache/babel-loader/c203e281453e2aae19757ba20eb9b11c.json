{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/javier/Escritorio/ironhack/Proyecto Final/Final-project/client/src/components/pages/Book/Book-details/Book-details.js\";\nimport React, { Component } from 'react';\nimport BooksService from '../../../../service/book.service';\nimport AuthService from '../../../../service/auth.service';\nimport './Book-details.css'; //si ponemos loader, irá aquí \n\nimport { Container, Row, Col, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nclass BookDetails extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      const book_id = this.props.match.params.book_id;\n      this.bookService.getBook(book_id).then(res => {\n        this.setState({\n          book: res.data\n        });\n        console.log(this.state.book);\n      }).catch(err => console.log(err));\n    };\n\n    this.deleteThisBook = () => {\n      const book_id = this.props.match.params.book_id;\n      this.bookService.deleteBook(book_id).then(res => this.props.history.push('/libros')).catch(err => console.log(err));\n    };\n\n    this.newChapter = () => {\n      const book_id = this.props.match.params.book_id;\n      console.log(this.props);\n      this.bookService.getBook(book_id).then(res => this.props.history.push(`/libros/${book_id}/nuevo-capitulo`)).catch(err => console.log(err));\n    };\n\n    this.saveFav = bookID => {\n      const favoriteBooks = [...this.props.loggedInUser.favoriteBooks];\n      favoriteBooks.push(bookID);\n      const updatedFavourites = [...favoriteBooks];\n      const updateUser = { ...this.props.loggedInUser,\n        favoriteBooks: updatedFavourites\n      };\n      this.authService.editUserInfo(this.props.loggedInUser._id, updateUser).then(response => {\n        this.props.setTheUser(response.data);\n      }).catch(err => console.log(err));\n    };\n\n    this.state = {\n      book: []\n    };\n    this.bookService = new BooksService();\n    this.authService = new AuthService();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: this.state.book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"book-details\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.state.book.image,\n              alt: this.state.book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Detalles\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: this.state.book.resume\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"G\\xE9nero: \", this.state.book.genre]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.newChapter(),\n              className: \"btn btn-sm btn-primary\",\n              children: \"Nuevo cap\\xEDtulo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/libros\",\n              className: \"btn btn-sm btn-dark\",\n              children: \"Volver\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.deleteThisBook(),\n              className: \"btn btn-sm btn-danger\",\n              children: \"Borrar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.saveFav(this.state.book._id),\n              children: \"A\\xF1adir a favoritos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Lista de cap\\xEDtulos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default BookDetails;","map":{"version":3,"sources":["/home/javier/Escritorio/ironhack/Proyecto Final/Final-project/client/src/components/pages/Book/Book-details/Book-details.js"],"names":["React","Component","BooksService","AuthService","Container","Row","Col","Button","Link","BookDetails","constructor","componentDidMount","book_id","props","match","params","bookService","getBook","then","res","setState","book","data","console","log","state","catch","err","deleteThisBook","deleteBook","history","push","newChapter","saveFav","bookID","favoriteBooks","loggedInUser","updatedFavourites","updateUser","authService","editUserInfo","_id","response","setTheUser","render","title","span","offset","image","resume","genre"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport BooksService from '../../../../service/book.service'\nimport AuthService from '../../../../service/auth.service'\n\nimport './Book-details.css'\n\n//si ponemos loader, irá aquí \n\nimport { Container, Row, Col, Button } from 'react-bootstrap'\n\nimport { Link } from 'react-router-dom'\n\nclass BookDetails extends Component {\n\n    constructor() {\n        super()\n        this.state = {\n            book: []\n        }\n        this.bookService = new BooksService()\n        this.authService = new AuthService()\n    }\n\n    componentDidMount = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.bookService\n            .getBook(book_id)\n            .then(res => {\n                this.setState({ book: res.data })\n                console.log(this.state.book)\n                })\n            .catch(err => console.log(err))\n\n    }\n\n    deleteThisBook = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.bookService\n            .deleteBook(book_id)\n            .then(res => this.props.history.push('/libros'))\n            .catch(err => console.log(err))\n        \n    }\n\n    newChapter = () => {\n\n        const book_id = this.props.match.params.book_id\n        console.log(this.props)\n\n        this.bookService\n            .getBook(book_id)\n            .then(res => this.props.history.push(`/libros/${book_id}/nuevo-capitulo`))\n            .catch(err => console.log(err))\n\n    }\n\n    saveFav = (bookID) => {\n\n        const favoriteBooks = [...this.props.loggedInUser.favoriteBooks]\n        favoriteBooks.push(bookID)\n        const updatedFavourites = [...favoriteBooks]\n        const updateUser = { ...this.props.loggedInUser, favoriteBooks: updatedFavourites }\n\n        this.authService\n            .editUserInfo(this.props.loggedInUser._id, updateUser)\n            .then((response) => { this.props.setTheUser(response.data) })\n            .catch(err => console.log(err))\n    }\n\n    render() {\n\n        return (\n            <>\n                <Container>\n                    <h1>{this.state.book.title}</h1>\n                </Container>\n                <Container className=\"book-details\">\n                    <Row>\n                        <Col md={{ span: 6, offset: 1 }} >\n                            <img src={this.state.book.image} alt={this.state.book.title} />\n                            <h3>Detalles</h3>\n                            <p>{this.state.book.resume}</p>\n                            <hr />\n                            <p>Género: {this.state.book.genre}</p>\n                            <Button onClick={() => this.newChapter()} className=\"btn btn-sm btn-primary\">Nuevo capítulo</Button>\n                            <Link to=\"/libros\" className=\"btn btn-sm btn-dark\">Volver</Link>\n                            <Button onClick={() => this.deleteThisBook()} className=\"btn btn-sm btn-danger\">Borrar</Button>\n                            <Button onClick={() => this.saveFav(this.state.book._id)} >Añadir a favoritos</Button>\n                        </Col>\n                        <Col md={4}>\n                            <h3>Lista de capítulos</h3>\n                            {/* {this.state.book.chapters.map} */}\n                            <p>Capítulo 1</p>\n                            <p>Capítulo 2</p>\n                            <p>Capítulo 3</p>\n                            <p>Capítulo 4</p>\n                        </Col>\n                    </Row>\n                </Container>\n            </>\n\n        )\n    }\n}\n\nexport default BookDetails\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}