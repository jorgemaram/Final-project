{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/javier/Escritorio/ironhack/Proyecto Final/Final-project/client/src/components/pages/Book/Book-details/Book-details.js\";\nimport React, { Component } from 'react';\nimport BooksService from '../../../../service/book.service';\nimport AuthService from '../../../../service/auth.service';\nimport './Book-details.css'; //si ponemos loader, irá aquí \n\nimport { Container, Row, Col, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nclass BookDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      const book_id = this.props.match.params.book_id;\n      this.bookService.getBook(book_id).then(res => {\n        this.setState({\n          book: res.data\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.deleteThisBook = () => {\n      const book_id = this.props.match.params.book_id;\n      this.bookService.deleteBook(book_id).then(res => this.props.history.push('/libros')).catch(err => console.log(err));\n    };\n\n    this.newChapter = () => {\n      const book_id = this.props.match.params.book_id;\n      console.log(this.props);\n      this.bookService.getBook(book_id).then(res => this.props.history.push(`/libros/${book_id}/nuevo-capitulo`)).catch(err => console.log(err));\n    };\n\n    this.saveFav = bookID => {\n      const favoriteBooks = [...this.props.loggedUser.favoriteBooks];\n      favoriteBooks.push(bookID);\n      const updatedFavourites = [...favoriteBooks];\n      const updateUser = { ...this.props.loggedUser,\n        favoriteBooks: updatedFavourites\n      };\n      this.authService.editUser(this.props.loggedUser._id, updateUser).then(response => console.log(response.data)).catch(err => console.log(err));\n    };\n\n    this.state = {\n      book: [],\n      favoritesBook: this.props.loggedUser ? this.props.loggedUser.favoriteBooks : []\n    };\n    this.bookService = new BooksService();\n    this.authService = new AuthService();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: this.state.book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"book-details\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: {\n              span: 6,\n              offset: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.state.book.image,\n              alt: this.state.book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Detalles\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: this.state.book.resume\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"G\\xE9nero: \", this.state.book.genre]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.newChapter(),\n              className: \"btn btn-sm btn-primary\",\n              children: \"Nuevo cap\\xEDtulo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/libros\",\n              className: \"btn btn-sm btn-dark\",\n              children: \"Volver\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.deleteThisBook(),\n              className: \"btn btn-sm btn-danger\",\n              children: \"Borrar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.saveFav(this.state.book._id),\n              children: \"A\\xF1adir a favoritos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 4,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Lista de cap\\xEDtulos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cap\\xEDtulo 4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default BookDetails;","map":{"version":3,"sources":["/home/javier/Escritorio/ironhack/Proyecto Final/Final-project/client/src/components/pages/Book/Book-details/Book-details.js"],"names":["React","Component","BooksService","AuthService","Container","Row","Col","Button","Link","BookDetails","constructor","props","componentDidMount","book_id","match","params","bookService","getBook","then","res","setState","book","data","catch","err","console","log","deleteThisBook","deleteBook","history","push","newChapter","saveFav","bookID","favoriteBooks","loggedUser","updatedFavourites","updateUser","authService","editUser","_id","response","state","favoritesBook","render","title","span","offset","image","resume","genre"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport BooksService from '../../../../service/book.service'\nimport AuthService from '../../../../service/auth.service'\n\nimport './Book-details.css'\n\n//si ponemos loader, irá aquí \n\nimport { Container, Row, Col, Button } from 'react-bootstrap'\n\nimport { Link } from 'react-router-dom'\n\nclass BookDetails extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state =\n        {\n            book: [],\n            favoritesBook: this.props.loggedUser ? this.props.loggedUser.favoriteBooks : [],\n        }\n        \n        this.bookService = new BooksService()\n        this.authService = new AuthService()\n    }\n\n    componentDidMount = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.bookService\n            .getBook(book_id)\n            .then(res => {this.setState({ book: res.data })})\n            .catch(err => console.log(err))\n\n    }\n\n    deleteThisBook = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.bookService\n            .deleteBook(book_id)\n            .then(res => this.props.history.push('/libros'))\n            .catch(err => console.log(err))\n        \n    }\n\n    newChapter = () => {\n\n        const book_id = this.props.match.params.book_id\n        console.log(this.props)\n\n        this.bookService\n            .getBook(book_id)\n            .then(res => this.props.history.push(`/libros/${book_id}/nuevo-capitulo`))\n            .catch(err => console.log(err))\n\n    }\n\n    saveFav = (bookID) => {\n\n        const favoriteBooks = [...this.props.loggedUser.favoriteBooks]\n\n        favoriteBooks.push(bookID)\n\n        const updatedFavourites = [...favoriteBooks]\n\n        const updateUser = { ...this.props.loggedUser, favoriteBooks: updatedFavourites }\n\n        this.authService\n            .editUser(this.props.loggedUser._id, updateUser)\n            .then((response) => console.log(response.data) )\n            .catch(err => console.log(err))\n    }\n\n\n    render() {\n\n        return (\n            <>\n                <Container>\n                    <h1>{this.state.book.title}</h1>\n                </Container>\n                <Container className=\"book-details\">\n                    <Row>\n                        <Col md={{ span: 6, offset: 1 }} >\n                            <img src={this.state.book.image} alt={this.state.book.title} />\n                            <h3>Detalles</h3>\n                            <p>{this.state.book.resume}</p>\n                            <hr />\n                            <p>Género: {this.state.book.genre}</p>\n                            <Button onClick={() => this.newChapter()} className=\"btn btn-sm btn-primary\">Nuevo capítulo</Button>\n                            <Link to=\"/libros\" className=\"btn btn-sm btn-dark\">Volver</Link>\n                            <Button onClick={() => this.deleteThisBook()} className=\"btn btn-sm btn-danger\">Borrar</Button>\n                            <Button onClick={() => this.saveFav(this.state.book._id)} >Añadir a favoritos</Button>\n                        </Col>\n                        <Col md={4}>\n                            <h3>Lista de capítulos</h3>\n                            {/* {this.state.book.chapters.map} */}\n                            <p>Capítulo 1</p>\n                            <p>Capítulo 2</p>\n                            <p>Capítulo 3</p>\n                            <p>Capítulo 4</p>\n                        </Col>\n                    </Row>\n                </Container>\n            </>\n\n        )\n    }\n}\n\nexport default BookDetails\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}